{"filter":false,"title":"terrain.py","tooltip":"/terrain.py","ace":{"folds":[],"scrolltop":397,"scrollleft":0,"selection":{"start":{"row":52,"column":0},"end":{"row":52,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"hash":"e7a2be6061a31909137aa7590809b249f682c5f1","undoManager":{"mark":7,"position":7,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":50,"column":21},"action":"insert","lines":["from django.core.management import call_command","from django.test.simple import DjangoTestSuiteRunner"," ","from lettuce import before, after, world","from logging import getLogger","from selenium import webdriver"," ","try:","\tfrom south.management.commands import patch_for_test_db_setup","except:","\tpass"," ","logger = getLogger(__name__)","logger.info(\"Loading the terrain file...\")"," ","@before.runserver","def setup_database(actual_server):","\t'''","\tThis will setup your database, sync it, and run migrations if you are using South.","\tIt does this before the Test Django server is set up.","\t'''","\tlogger.info(\"Setting up a test database...\")"," ","\t# Uncomment if you are using South","\t# patch_for_test_db_setup()"," ","\tworld.test_runner = DjangoTestSuiteRunner(interactive=False)","\tDjangoTestSuiteRunner.setup_test_environment(world.test_runner)","\tworld.created_db = DjangoTestSuiteRunner.setup_databases(world.test_runner)"," ","\tcall_command('syncdb', interactive=False, verbosity=0)"," ","\t# Uncomment if you are using South","\t# call_command('migrate', interactive=False, verbosity=0)"," ","@after.runserver","def teardown_database(actual_server):","\t'''","\tThis will destroy your test database after all of your tests have executed.","\t'''","\tlogger.info(\"Destroying the test database ...\")"," ","\tDjangoTestSuiteRunner.teardown_databases(world.test_runner, world.created_db)"," ","@before.all","def setup_browser():","\tworld.browser = webdriver.Firefox()"," ","@after.all","def teardown_browser(total):","\tworld.browser.quit()"]}]}],[{"group":"doc","deltas":[{"start":{"row":50,"column":21},"end":{"row":51,"column":0},"action":"insert","lines":["",""]},{"start":{"row":51,"column":0},"end":{"row":51,"column":1},"action":"insert","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":51,"column":1},"end":{"row":52,"column":0},"action":"insert","lines":["",""]},{"start":{"row":52,"column":0},"end":{"row":52,"column":1},"action":"insert","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":0},"end":{"row":52,"column":1},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":0},"end":{"row":55,"column":39},"action":"insert","lines":["@step(u'I should see \"([^\"]*)\"')","def i_should_see_content(step, content):","\tif content not in world.browser.find_element_by_id(\"content\").text:","\t\traise Exception(\"Content not found.\")"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":0},"end":{"row":55,"column":39},"action":"remove","lines":["@step(u'I should see \"([^\"]*)\"')","def i_should_see_content(step, content):","\tif content not in world.browser.find_element_by_id(\"content\").text:","\t\traise Exception(\"Content not found.\")"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":0},"end":{"row":55,"column":39},"action":"insert","lines":["@step(u'I should see \"([^\"]*)\"')","def i_should_see_content(step, content):","\tif content not in world.browser.find_element_by_id(\"content\").text:","\t\traise Exception(\"Content not found.\")"]}]}],[{"group":"doc","deltas":[{"start":{"row":52,"column":0},"end":{"row":55,"column":39},"action":"remove","lines":["@step(u'I should see \"([^\"]*)\"')","def i_should_see_content(step, content):","\tif content not in world.browser.find_element_by_id(\"content\").text:","\t\traise Exception(\"Content not found.\")"]}]}]]},"timestamp":1426673728000}